<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Cart - Bilawal Clinic</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body{font-family:sans-serif;background:#f8fbff;margin:0;padding:0;}
    header{background:#0d47a1;color:#fff;padding:15px;text-align:center;font-size:22px;font-weight:600;}
    nav{display:flex;justify-content:center;gap:25px;padding:10px;background:#1565c0;}
    nav a{color:white;text-decoration:none;font-weight:500;}
    nav a:hover{text-decoration:underline;}
    table{width:95%;margin:20px auto;border-collapse:collapse;background:#fff;}
    th,td{border:1px solid #ccc;padding:12px;text-align:center;}
    th{background:#e3f2fd;}
    .qty-btn{padding:4px 10px;margin:0 5px;background:#1976d2;color:#fff;border:none;cursor:pointer;border-radius:4px;}
    .qty-btn:hover{background:#0d47a1;}
    .total{text-align:right;font-size:18px;margin:20px auto;width:95%;font-weight:bold;}
    form{width:90%;max-width:450px;margin:25px auto;padding:20px;background:#fff;border:1px solid #ccc;border-radius:6px;}
    form input,form select,form button{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:4px;}
    form button{background:#1976d2;color:#fff;font-weight:bold;border:none;cursor:pointer;}
    form button:hover{background:#0d47a1;}
  </style>
</head>
<body>
<header>Bilawal Clinic</header>
<nav>
  <a href="index.html">Home</a>
  <a href="medicine.html">Medicine</a>
  <a href="appointment.html">Appointment</a>
  <a href="contact.html">Contact</a>
</nav>

<h2 style="text-align:center;margin-top:20px;">Your Cart</h2>

<table>
  <thead>
    <tr>
      <th>Medicine</th>
      <th>Price (Rs)</th>
      <th>Quantity</th>
      <th>Total (Rs)</th>
    </tr>
  </thead>
  <tbody id="cart-body"></tbody>
</table>
<div class="total">Grand Total: <span id="grand-total">Rs 0</span></div>

<h2 style="text-align:center;">Checkout</h2>
<form id="checkout-form">
  <input type="text" name="name" placeholder="Full Name" required>
  <input type="tel" name="phone" placeholder="Phone Number" required>
  <input type="text" name="address" placeholder="Delivery Address" required>
  <select name="payment" required>
    <option value="">Select Payment</option>
    <option value="Cash on Delivery">Cash on Delivery</option>
  </select>
  <button type="submit">Place Order</button>
</form>

<script>
function getCart(){
  return JSON.parse(localStorage.getItem('cart'))||[];
}

function saveCart(cart){
  localStorage.setItem('cart',JSON.stringify(cart));
}

function updateDisplay(){
  const cart = getCart();
  const body = document.getElementById('cart-body');
  body.innerHTML='';
  let total=0;

  cart.forEach(item=>{
    const subTotal=item.price*item.quantity;
    total+=subTotal;
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td>${item.name}</td>
      <td>${item.price}</td>
      <td>
        <button class="qty-btn" onclick="changeQty('${item.id}',-1)">-</button>
        ${item.quantity}
        <button class="qty-btn" onclick="changeQty('${item.id}',1)">+</button>
      </td>
      <td>${subTotal}</td>`;
    body.appendChild(tr);
  });

  document.getElementById('grand-total').textContent='Rs '+total;
}

function changeQty(id,delta){
  let cart=getCart();
  const item=cart.find(x=>x.id===id);
  if(!item) return;
  item.quantity+=delta;
  if(item.quantity<=0){
    cart=cart.filter(x=>x.id!==id);
  }
  saveCart(cart);
  updateDisplay();
}

document.getElementById('checkout-form').addEventListener('submit',e=>{
  e.preventDefault();
  const cart=getCart();
  if(cart.length===0){alert('Cart is empty');return;}
  const formData=new FormData(e.target);
  let message=`New Order:\n\nName: ${formData.get('name')}\nPhone: ${formData.get('phone')}\nAddress: ${formData.get('address')}\nPayment: ${formData.get('payment')}\n\nItems:\n`;
  cart.forEach(i=>{
    message += `${i.name} - Rs ${i.price} x ${i.quantity} = Rs ${i.price*i.quantity}\n`;
  });
  message += `\nTotal: ${document.getElementById('grand-total').textContent}`;

  // Example: open email client (replace with your backend/email API if available)
  window.location.href=`mailto:youremail@example.com?subject=New Order&body=${encodeURIComponent(message)}`;

  localStorage.removeItem('cart');
  updateDisplay();
  e.target.reset();
});

updateDisplay();
</script>
</body>
</html>
